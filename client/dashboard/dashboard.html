<head>
  <title>goalie</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>

<body>
    {{> header}}
</body>

<template name="header">
    <header class="main">
        <h1>Goalie</h1>
        <a href="archived" class="right">Archived projects</a> 
        {{> addProjectLink}} 
    </header>
</template>

<template name="projects">
    {{#each project}}
        {{> project}}
    {{/each}}
</template>

<template name="project">
  <div class="project">
    <h1>{{name}}</h1>
    {{> itemStatus}}
    <a href="#" class="addMilestoneLink" data-project-name="{{name}}">+ Add milestone</a>
    <div class="addMilestoneForm">
        {{> addMilestoneForm}}
    </div>
    {{#if milestones}}
        <div class="milestones">
            {{#each milestones}}
                {{> milestones}}
            {{/each}}
            <a href="#" class="addToArchiveLink" data-project-name="{{name}}">Archive this project -></a>
        </div>
    {{/if}}
  </div>
</template>

<template name="milestones">
    <div class="milestone {{itemStatus}}">
        <h2>{{name}}</h2>
        <a href="#" class="addTaskLink">+ Add task</a>
        <div class="addTaskForm">
            {{> addTaskForm}}
        </div>
        {{> itemStatus}}

        {{#if tasks}}
            <div class="tasks">
                {{#each tasks}}
                    {{> tasks}}
                {{/each}}
            </div>
        {{/if}}
    </div>
</template>

<template name="tasks">
    <div class="task {{itemStatus}}">
        <h3>{{name}}</h3>
        {{#if notes}}
            <div class="taskNotes">
                Notes: {{notes}}
            </div>
        {{else}} 
            <a href="#" class="addTaskNotesLink">+ Add notes to this task</a>
            <div class="addTaskNotesForm">
                {{> addTaskNotesForm}}
            </div>
        {{/if}}
        {{> itemStatus}}
   </div>
</template>

<template name="addProjectLink">
    <div class="right addProjectLink">
        <a href="#" class="expand">Add project</a>
    </div>
    
    <div class="expandable">
      {{> addProject}}
    </div>
</template>

<template name="addProject">
    <div id="addProject">
    <form>
        <input type="text" value="Project Name" name="projectName" id="newProjectName"></input>
        <input type="submit" id="addProjectSubmit" value="Add project"/>
    </form>
    </div>
</template>

<template name="addMilestoneForm">
    <form>
        <label>Milestone</label>
        <input type="text" class="milestoneName" data-project-name="{{name}}"/>
        <input type="submit" id="addMilestoneSubmit" value="Add milestone"/>
    </form>
</template>

<template name="addTaskForm">
    <form>
        <label>Task</label>
        <input type="text" class="taskName" data-milestone-name="{{name}}"/>
        <input type="submit" id="addTaskSubmit" value="Add task"/>
    </form>
</template>

<template name="addTaskNotesForm">
    <form>
        <label>Notes for this task</label>
        <textarea class="addTaskNotes" data-task-name="{{name}}"></textarea>
        <input type="submit" id="addTaskNotesSubmit" value="Add notes"/>
    </form>
</template>
